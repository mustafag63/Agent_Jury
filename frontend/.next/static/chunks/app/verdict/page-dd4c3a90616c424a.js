(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{8848:function(e,t,n){Promise.resolve().then(n.bind(n,3535))},9376:function(e,t,n){"use strict";var i=n(5475);n.o(i,"useRouter")&&n.d(t,{useRouter:function(){return i.useRouter}})},3535:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var i=n(7437),r=n(2265),s=n(9376),o=n(135),a=n(9478),c=n(5156),u=n(611);function l(){var e;let t=(0,s.useRouter)(),[n,l]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),w=(0,c.G)(),x=(null==w?void 0:w.caseText)||"",{agent_results:v=[],final_verdict:p=null}=(null==w?void 0:w.evaluation)||{},b=v.find(e=>"Feasibility Agent"===e.role),N=v.find(e=>"Innovation Agent"===e.role),y=v.find(e=>"Risk & Ethics Agent"===e.role),g=(0,r.useMemo)(()=>((null==p?void 0:p.summary)||(null==p?void 0:p.decision)||"No summary").slice(0,140),[p]);async function S(){try{l(!0),f(""),h("");let e=await (0,u.l$)(),t=(0,o.w)((0,a.Y0)(x)),n=await e.saveVerdict(t,Number((null==b?void 0:b.score)||0),Number((null==N?void 0:N.score)||0),Number((null==y?void 0:y.score)||0),Number((null==p?void 0:p.final_score)||0),g);await n.wait(),h(n.hash),(0,c.K)({lastTxHash:n.hash})}catch(e){f(e instanceof Error?e.message:"Failed to save on-chain")}finally{l(!1)}}return p?(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{children:"4) Final Verdict"}),(0,i.jsxs)("p",{children:["Final score: ",(0,i.jsx)("strong",{children:p.final_score})]}),(0,i.jsxs)("p",{children:["Decision:"," ",(0,i.jsx)("span",{className:"SHIP"===(e=p.decision)?"badge ship":"ITERATE"===e?"badge iterate":"badge reject",children:p.decision})]}),(0,i.jsx)("p",{children:p.summary}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Next steps"})}),(0,i.jsx)("ul",{children:(p.next_steps||[]).map((e,t)=>(0,i.jsx)("li",{children:e},"step-".concat(t)))}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("button",{className:"button",disabled:n,onClick:S,children:n?"Waiting for MetaMask...":"Save decision on-chain"}),(0,i.jsx)("button",{className:"button",onClick:()=>t.push("/history"),children:"Go to History"})]}),d&&(0,i.jsxs)("p",{children:["Saved. Tx hash: ",d]}),m&&(0,i.jsx)("p",{style:{color:"crimson"},children:m})]}):(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("p",{children:"No verdict found. Start from case submission."}),(0,i.jsx)("button",{className:"button",onClick:()=>t.push("/submit"),children:"Go to Submit"})]})}},611:function(e,t,n){"use strict";n.d(t,{JJ:function(){return h},Jo:function(){return d},l$:function(){return f},o6:function(){return m}});var i=n(288),r=n(5810),s=n(257);let o=s.env.NEXT_PUBLIC_AGENT_JURY_CONTRACT||"0xYourDeployedContractAddress",a=Number(s.env.NEXT_PUBLIC_EXPECTED_CHAIN_ID)||10143,c="0x".concat(a.toString(16)),u={chainId:c,chainName:"Monad Testnet",nativeCurrency:{name:"MON",symbol:"MON",decimals:18},rpcUrls:["https://testnet-rpc.monad.xyz"],blockExplorerUrls:["https://testnet.monadexplorer.com"]},l=["function saveVerdict(bytes32 caseHash,uint8 feasibilityScore,uint8 innovationScore,uint8 riskScore,uint8 finalScore,string shortVerdict) external","function getVerdict(uint256 index) external view returns (tuple(bytes32 caseHash,uint8 feasibilityScore,uint8 innovationScore,uint8 riskScore,uint8 finalScore,string shortVerdict,address submitter,uint256 timestamp))","function getVerdictCount() external view returns (uint256)"];async function d(){if(!window.ethereum)throw Error("MetaMask not found");return new i.Q(window.ethereum)}async function h(){if(!window.ethereum)throw Error("MetaMask not found");if(parseInt(await window.ethereum.request({method:"eth_chainId"}),16)!==a)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:c}]})}catch(e){if((null==e?void 0:e.code)===4902)await window.ethereum.request({method:"wallet_addEthereumChain",params:[u]});else throw Error("Please switch MetaMask to Monad Testnet (chain ".concat(a,")."))}}async function m(){let e=await d();return new r.CH(o,l,e)}async function f(){await h();let e=await d(),t=await e.getSigner();return new r.CH(o,l,t)}},5156:function(e,t,n){"use strict";n.d(t,{G:function(){return r},K:function(){return s}});let i="agent_jury_session";function r(){try{return JSON.parse(localStorage.getItem(i)||"{}")}catch(e){return{}}}function s(e){let t={...r(),...e};localStorage.setItem(i,JSON.stringify(t))}}},function(e){e.O(0,[414,971,117,744],function(){return e(e.s=8848)}),_N_E=e.O()}]);