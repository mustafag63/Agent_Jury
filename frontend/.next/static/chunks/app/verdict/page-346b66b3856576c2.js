(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[945],{5642:function(e,n,t){Promise.resolve().then(t.bind(t,3535))},9376:function(e,n,t){"use strict";var i=t(5475);t.o(i,"useRouter")&&t.d(n,{useRouter:function(){return i.useRouter}})},3535:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return l}});var i=t(7437),s=t(2265),r=t(9376),o=t(135),c=t(9478),a=t(5156),u=t(611);function l(){var e;let n=(0,r.useRouter)(),[t,l]=(0,s.useState)(!1),[d,h]=(0,s.useState)(""),[f,m]=(0,s.useState)(""),v=(0,a.G)(),x=(null==v?void 0:v.caseText)||"",{agent_results:b=[],final_verdict:p=null}=(null==v?void 0:v.evaluation)||{},N=b.find(e=>"Feasibility Agent"===e.role),g=b.find(e=>"Innovation Agent"===e.role),j=b.find(e=>"Risk & Ethics Agent"===e.role),w=(0,s.useMemo)(()=>((null==p?void 0:p.summary)||(null==p?void 0:p.decision)||"No summary").slice(0,140),[p]);async function y(){try{l(!0),m(""),h("");let e=await (0,u.l$)(),n=(0,o.w)((0,c.Y0)(x)),t=await e.saveVerdict(n,Number((null==N?void 0:N.score)||0),Number((null==g?void 0:g.score)||0),Number((null==j?void 0:j.score)||0),Number((null==p?void 0:p.final_score)||0),w);await t.wait(),h(t.hash),(0,a.K)({lastTxHash:t.hash})}catch(e){m(e instanceof Error?e.message:"Failed to save on-chain")}finally{l(!1)}}return p?(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h2",{children:"4) Final Verdict"}),(0,i.jsxs)("p",{children:["Final score: ",(0,i.jsx)("strong",{children:p.final_score})]}),(0,i.jsxs)("p",{children:["Decision:"," ",(0,i.jsx)("span",{className:"SHIP"===(e=p.decision)?"badge ship":"ITERATE"===e?"badge iterate":"badge reject",children:p.decision})]}),(0,i.jsx)("p",{children:p.summary}),(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:"Next steps"})}),(0,i.jsx)("ul",{children:(p.next_steps||[]).map((e,n)=>(0,i.jsx)("li",{children:e},"step-".concat(n)))}),(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("button",{className:"button",disabled:t,onClick:y,children:t?"Waiting for MetaMask...":"Save decision on-chain"}),(0,i.jsx)("button",{className:"button",onClick:()=>n.push("/history"),children:"Go to History"})]}),d&&(0,i.jsxs)("p",{children:["Saved. Tx hash: ",d]}),f&&(0,i.jsx)("p",{style:{color:"crimson"},children:f})]}):(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("p",{children:"No verdict found. Start from case submission."}),(0,i.jsx)("button",{className:"button",onClick:()=>n.push("/submit"),children:"Go to Submit"})]})}},611:function(e,n,t){"use strict";t.d(n,{Jo:function(){return c},l$:function(){return u},o6:function(){return a}});var i=t(288),s=t(5810);let r=t(257).env.NEXT_PUBLIC_AGENT_JURY_CONTRACT||"0xYourDeployedContractAddress",o=["function saveVerdict(bytes32 caseHash,uint8 feasibilityScore,uint8 innovationScore,uint8 riskScore,uint8 finalScore,string shortVerdict) external","function getVerdict(uint256 index) external view returns (tuple(bytes32 caseHash,uint8 feasibilityScore,uint8 innovationScore,uint8 riskScore,uint8 finalScore,string shortVerdict,address submitter,uint256 timestamp))","function getVerdictCount() external view returns (uint256)"];async function c(){if(!window.ethereum)throw Error("MetaMask not found");return new i.Q(window.ethereum)}async function a(){let e=await c();return new s.CH(r,o,e)}async function u(){let e=await c(),n=await e.getSigner();return new s.CH(r,o,n)}},5156:function(e,n,t){"use strict";t.d(n,{G:function(){return s},K:function(){return r}});let i="agent_jury_session";function s(){try{return JSON.parse(localStorage.getItem(i)||"{}")}catch(e){return{}}}function r(e){let n={...s(),...e};localStorage.setItem(i,JSON.stringify(n))}}},function(e){e.O(0,[414,971,117,744],function(){return e(e.s=5642)}),_N_E=e.O()}]);